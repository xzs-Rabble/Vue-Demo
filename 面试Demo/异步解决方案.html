<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>异步解决方案</title>
</head>
<body>
    <h2>异步解决方案</h2>
    <script>
        //异步解决方案
        /* 
        1. callback 回调函数
        2. promise
        3. async/await
        */
        /* function fun(){
            let res;
            setInterval(()=>{
                res="我是第一"
            },100)
            console.log("res:",res); //undefined
        } */
        //callback
        /* function getData(callback){
            let res;
            setTimeout(()=>{
                callback("我是第一")
            },100)
            
        }
        getData((res)=>{  //接收callback
            console.log("res:",res);
        }) */
        //Promise有三种状态：pending => 转换成两个状态resolve/reject
        //Promise.all(promise组成的数组) 多个异步执行完成后进行操作，返回最近的一个错误
        /* function p1(param){
            return new Promise((resolve,reject)=>{
                resolve("结果")
                reject("失败结果")
            })
        }
        p1().then(res=>{
            console.log("promise",res);
        }).catch(err=>{
            console.log("promise err",err);
        }) */

        function fun(params){
            return new Promise((resolve,reject)=>{
                setTimeout(()=>{
                    resolve([1,2,3])
                },100)
            })
        }
        //async可以单独使用，并且返回的是promise对象
        //await（后面跟的是个异步/promise）必须配合async使用，不然会报错
        async function getData(){
            let res = await fun()
            console.log("res",res);
            return "你好"
        }
        console.log("结果",getData());
    </script>
</body>
</html>